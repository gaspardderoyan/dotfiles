# ---------- history & completion ----------
HISTFILE=~/.zsh_history
HISTSIZE=50000
SAVEHIST=50000
setopt hist_ignore_all_dups share_history inc_append_history
autoload -Uz compinit && compinit

# ---------- paths & tools ----------
export PATH="$HOME/.local/bin:$PATH"
eval "$(zoxide init zsh)"
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
alias ls="eza --group-directories-first --icons=auto"
alias ll="eza -lh --group-directories-first --icons=auto"
alias cat="bat --paging=never"
alias nv="nvim"
# Clipboard helpers
alias xp='termux-clipboard-get'              # Paste from clipboard
alias xc="termux-clipboard-set"              # Copy text into clipboard

# ---------- zinit bootstrap (MUST come before any `zinit light`) ----------
if [[ ! -f $HOME/.local/share/zinit/zinit.git/zinit.zsh ]]; then
  print -P "%F{33}Installing Zinitâ€¦%f"
  command mkdir -p "$HOME/.local/share/zinit" && command chmod g-rwX "$HOME/.local/share/zinit"
  command git clone https://github.com/zdharma-continuum/zinit "$HOME/.local/share/zinit/zinit.git" || \
    print -P "%F{160}Zinit clone failed.%f"
fi
source "$HOME/.local/share/zinit/zinit.git/zinit.zsh"
autoload -Uz _zinit; (( ${+_comps} )) && _comps[zinit]=_zinit

# (optional) annexes
zinit light-mode for \
  zdharma-continuum/zinit-annex-as-monitor \
  zdharma-continuum/zinit-annex-bin-gem-node \
  zdharma-continuum/zinit-annex-patch-dl \
  zdharma-continuum/zinit-annex-rust

# ---------- plugins ----------
zinit light zsh-users/zsh-autosuggestions
zinit light zdharma-continuum/fast-syntax-highlighting
zinit light zsh-users/zsh-history-substring-search

# history substring search keys
bindkey '^P' history-substring-search-up
bindkey '^N' history-substring-search-down

# ---------- prompt ----------
eval "$(starship init zsh)"
